<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<title>Markmap</title>
<style>
* {
  margin: 0;
  padding: 0;
}
#mindmap {
  display: block;
  width: 100vw;
  height: 100vh;
}
</style>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.14.4/dist/style.css">
</head>
<body>
<svg id="mindmap"></svg>
<script src="https://cdn.jsdelivr.net/npm/d3@6.7.0"></script><script src="https://cdn.jsdelivr.net/npm/markmap-view@0.14.4"></script><script src="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.14.4/dist/index.umd.min.js"></script><script>(r => {
                setTimeout(r);
              })(() => {
  const {
    markmap,
    mm
  } = window;
  const toolbar = new markmap.Toolbar();
  toolbar.attach(mm);
  const el = toolbar.render();
  el.setAttribute('style', 'position:absolute;bottom:20px;right:20px');
  document.body.append(el);
})</script><script>((getMarkmap, getOptions, root, jsonOptions) => {
        const markmap = getMarkmap();
        window.mm = markmap.Markmap.create('svg#mindmap', (getOptions || markmap.deriveOptions)(jsonOptions), root);
      })(() => window.markmap,null,{"type":"heading","depth":0,"payload":{"lines":[0,1]},"content":"Microservices","children":[{"type":"heading","depth":1,"payload":{"lines":[4,5]},"content":"演进中的架构","children":[{"type":"heading","depth":2,"payload":{"lines":[6,7]},"content":"单体应用架构 (Monolithic)","children":[{"type":"list_item","depth":3,"payload":{"lines":[8,9]},"content":"项目<strong>架构简单</strong>，<strong>开发、维护成本低</strong>"},{"type":"list_item","depth":3,"payload":{"lines":[9,10]},"content":"缺点","children":[{"type":"list_item","depth":4,"payload":{"lines":[10,11]},"content":"开发","children":[{"type":"list_item","depth":5,"payload":{"lines":[11,12],"index":1},"content":"1. 大型项目<strong>编译、运行、测试成本高</strong>"},{"type":"list_item","depth":5,"payload":{"lines":[12,13],"index":2},"content":"2. 项目<strong>复杂度高</strong>"},{"type":"list_item","depth":5,"payload":{"lines":[13,14],"index":3},"content":"3. <strong>技术栈</strong>不易扩展"}]},{"type":"list_item","depth":4,"payload":{"lines":[14,15]},"content":"部署","children":[{"type":"list_item","depth":5,"payload":{"lines":[15,16],"index":1},"content":"1. 难以针对服务所需的<strong>硬件性能</strong>进行扩展"},{"type":"list_item","depth":5,"payload":{"lines":[16,17],"index":2},"content":"2. 无法<strong>故障隔离</strong>，单个功能异常造成整个系统崩溃"}]}]}]},{"type":"heading","depth":2,"payload":{"lines":[18,19]},"content":"垂直应用架构","children":[{"type":"list_item","depth":3,"payload":{"lines":[20,21]},"content":"实现了<strong>流量分担</strong>，解决<strong>并发问题</strong>"},{"type":"list_item","depth":3,"payload":{"lines":[21,22]},"content":"缺点","children":[{"type":"list_item","depth":4,"payload":{"lines":[22,23],"index":1},"content":"1. 系统间相互调用复杂度提高 (配置 IP 端口)"},{"type":"list_item","depth":4,"payload":{"lines":[23,24],"index":2},"content":"2. 系统间部分相同功能代码、数据冗余"}]}]},{"type":"heading","depth":2,"payload":{"lines":[25,26]},"content":"分布式架构","children":[{"type":"list_item","depth":3,"payload":{"lines":[27,28]},"content":"公共功能为基础服务层","children":[{"type":"list_item","depth":4,"payload":{"lines":[28,29],"index":1},"content":"1. <strong>提高代码复用性</strong>"},{"type":"list_item","depth":4,"payload":{"lines":[29,30],"index":2},"content":"2. <strong>降低系统间耦合度</strong>"},{"type":"list_item","depth":4,"payload":{"lines":[30,31],"index":3},"content":"3. <strong>易于扩展</strong>"}]},{"type":"list_item","depth":3,"payload":{"lines":[31,32]},"content":"缺点：","children":[{"type":"list_item","depth":4,"payload":{"lines":[32,33]},"content":"随着服务数量增多，相互<strong>调用关系复杂，难以维护</strong>"}]}]},{"type":"heading","depth":2,"payload":{"lines":[34,35]},"content":"SOA 架构 (Service-Oriented Architecture)","children":[{"type":"list_item","depth":3,"payload":{"lines":[36,37]},"content":"<a href=\"3-SOA.md\">3-SOA</a>"},{"type":"list_item","depth":3,"payload":{"lines":[37,38]},"content":"特点：","children":[{"type":"list_item","depth":4,"payload":{"lines":[38,39],"index":1},"content":"1. <strong>面向企业</strong>"},{"type":"list_item","depth":4,"payload":{"lines":[39,40],"index":2},"content":"2. 关注<strong>冗余问题</strong>"},{"type":"list_item","depth":4,"payload":{"lines":[40,41],"index":3},"content":"3. 解决<strong>信息孤岛</strong>"}]},{"type":"list_item","depth":3,"payload":{"lines":[41,42]},"content":"缺点：","children":[{"type":"list_item","depth":4,"payload":{"lines":[42,43],"index":1},"content":"1. 服务间有依赖关系，一旦某个环节出错会<strong>引起服务雪崩</strong>"},{"type":"list_item","depth":4,"payload":{"lines":[43,44],"index":2},"content":"2. 服务<strong>关系复杂，运维、测试、部署困难</strong>"}]}]},{"type":"heading","depth":2,"payload":{"lines":[45,46]},"content":"微服务架构 (Microservices)","children":[{"type":"list_item","depth":3,"payload":{"lines":[47,48]},"content":"<a href=\"https://icyfenix.cn/architecture/architect-history/microservices.html\">微服务时代</a>"},{"type":"list_item","depth":3,"payload":{"lines":[48,49]},"content":"服务原子化拆分，<strong>独立打包、部署、升级，利于扩展</strong>","children":[{"type":"list_item","depth":4,"payload":{"lines":[49,50],"index":1},"content":"1. <strong>面向应用</strong>"},{"type":"list_item","depth":4,"payload":{"lines":[50,51],"index":2},"content":"2. 关注<strong>服务粒度</strong>"}]},{"type":"list_item","depth":3,"payload":{"lines":[51,52]},"content":"缺点","children":[{"type":"list_item","depth":4,"payload":{"lines":[52,53]},"content":"<strong>技术</strong>成本高","children":[{"type":"list_item","depth":5,"payload":{"lines":[53,54]},"content":"容错"},{"type":"list_item","depth":5,"payload":{"lines":[54,55]},"content":"分布式事务"}]},{"type":"list_item","depth":4,"payload":{"lines":[55,56]},"content":"服务<strong>治理</strong>成本高"}]},{"type":"list_item","depth":3,"payload":{"lines":[56,57]},"content":"与 SOA 区别","children":[{"type":"list_item","depth":4,"payload":{"lines":[57,58],"index":1},"content":"1. SOA 是一种设计方法，<strong>关注服务重用性</strong>，解决<strong>企业内部</strong>的<strong>信息孤岛</strong>问题"},{"type":"list_item","depth":4,"payload":{"lines":[58,59],"index":2},"content":"2. 微服务<strong>关注解耦</strong>、使用<strong>更轻量级通信协议</strong>、更多<strong>关注 DevOps 持续交互</strong>"},{"type":"list_item","depth":4,"payload":{"lines":[59,60],"index":3},"content":"3. SOA 是微服务的<strong>超集</strong>"}]}]},{"type":"heading","depth":2,"payload":{"lines":[61,62]},"content":"后微服务时代 （Cloud Native）","children":[{"type":"list_item","depth":3,"payload":{"lines":[63,64]},"content":"<a href=\"https://icyfenix.cn/architecture/architect-history/post-microservices.html\">后微服务时代</a>"}]},{"type":"heading","depth":2,"payload":{"lines":[65,66]},"content":"无服务时代 (Serverless)","children":[{"type":"list_item","depth":3,"payload":{"lines":[67,68]},"content":"<a href=\"https://icyfenix.cn/architecture/architect-history/serverless.html\">无服务时代</a>"}]}]},{"type":"heading","depth":1,"payload":{"lines":[69,70]},"content":"通信协议","children":[{"type":"heading","depth":2,"payload":{"lines":[71,72]},"content":"RPC","children":[{"type":"list_item","depth":3,"payload":{"lines":[73,74]},"content":"强调像调用本地方法一样调用远程服务"},{"type":"list_item","depth":3,"payload":{"lines":[74,75]},"content":"强调网络通信"},{"type":"list_item","depth":3,"payload":{"lines":[75,76]},"content":"强调序列化/反序列化"}]},{"type":"heading","depth":2,"payload":{"lines":[77,78]},"content":"HTTP","children":[{"type":"list_item","depth":3,"payload":{"lines":[79,80]},"content":"超文本协议"},{"type":"list_item","depth":3,"payload":{"lines":[80,81]},"content":"OSI七层模型的应用层协议"},{"type":"list_item","depth":3,"payload":{"lines":[81,82]},"content":"数据传输协议"}]}]},{"type":"heading","depth":1,"payload":{"lines":[83,84]},"content":"微服务架构目的","children":[{"type":"list_item","depth":2,"payload":{"lines":[85,86]},"content":"高可用"},{"type":"list_item","depth":2,"payload":{"lines":[86,87]},"content":"高并发"},{"type":"list_item","depth":2,"payload":{"lines":[87,88]},"content":"高性能"},{"type":"list_item","depth":2,"payload":{"lines":[88,89]},"content":"高可扩展"}]},{"type":"heading","depth":1,"payload":{"lines":[90,91]},"content":"<a href=\"10-必要条件\">必要条件</a>","children":[{"type":"heading","depth":2,"payload":{"lines":[92,93]},"content":"1 DevOps Experience"},{"type":"heading","depth":2,"payload":{"lines":[96,97]},"content":"2 弹性扩容 (Auto Scaling &amp; Self Healing)"},{"type":"heading","depth":2,"payload":{"lines":[98,99]},"content":"3 弹性和容错 (Resilence &amp; Fault Tolerance)"},{"type":"heading","depth":2,"payload":{"lines":[100,101]},"content":"4 链路追踪 (Distributed Tracing)","children":[{"type":"list_item","depth":3,"payload":{"lines":[102,103]},"content":"Skywalking","children":[{"type":"list_item","depth":4,"payload":{"lines":[103,104]},"content":"监控粒度细"}]},{"type":"list_item","depth":3,"payload":{"lines":[104,105]},"content":"CAT"},{"type":"list_item","depth":3,"payload":{"lines":[105,106]},"content":"zipkin"},{"type":"list_item","depth":3,"payload":{"lines":[106,107]},"content":"pingpoint"}]},{"type":"heading","depth":2,"payload":{"lines":[108,109]},"content":"5 Centralized Metrics","children":[{"type":"list_item","depth":3,"payload":{"lines":[110,111]},"content":"ELK (完善)"},{"type":"list_item","depth":3,"payload":{"lines":[111,112]},"content":"Prometheus + grafana"}]},{"type":"heading","depth":2,"payload":{"lines":[113,114]},"content":"6 Centralized Logging"},{"type":"heading","depth":2,"payload":{"lines":[115,116]},"content":"7 API 网关 (API Gateway)","children":[{"type":"list_item","depth":3,"payload":{"lines":[117,118]},"content":"网关","children":[{"type":"list_item","depth":4,"payload":{"lines":[118,119]},"content":"流量网关"},{"type":"list_item","depth":4,"payload":{"lines":[119,120]},"content":"业务网关"}]},{"type":"list_item","depth":3,"payload":{"lines":[120,121]},"content":"统一服务入口"},{"type":"list_item","depth":3,"payload":{"lines":[121,122]},"content":"流量治理"}]},{"type":"heading","depth":2,"payload":{"lines":[123,124]},"content":"8 任务管理 (Job Management)"},{"type":"heading","depth":2,"payload":{"lines":[125,126]},"content":"9 Singleton Application"},{"type":"heading","depth":2,"payload":{"lines":[127,128]},"content":"10 负载均衡 (Load Balancing)"},{"type":"heading","depth":2,"payload":{"lines":[129,130]},"content":"11 服务发现 (Service Discovery)","children":[{"type":"list_item","depth":3,"payload":{"lines":[131,132],"index":1},"content":"1. 服务注册"},{"type":"list_item","depth":3,"payload":{"lines":[132,133],"index":2},"content":"2. 服务续约"},{"type":"list_item","depth":3,"payload":{"lines":[133,134],"index":3},"content":"3. 服务获取"},{"type":"list_item","depth":3,"payload":{"lines":[134,135],"index":4},"content":"4. 服务调用"},{"type":"list_item","depth":3,"payload":{"lines":[135,136],"index":5},"content":"5. 服务同步"},{"type":"list_item","depth":3,"payload":{"lines":[136,137],"index":6},"content":"6. 服务剔除"},{"type":"list_item","depth":3,"payload":{"lines":[137,138],"index":7},"content":"7. 自我保护"},{"type":"list_item","depth":3,"payload":{"lines":[138,139],"index":8},"content":"8. 服务下线"},{"type":"list_item","depth":3,"payload":{"lines":[139,140],"index":9},"content":"9. 动态感知"}]},{"type":"heading","depth":2,"payload":{"lines":[141,142]},"content":"12 配置中心 (Configuration Management)","children":[{"type":"list_item","depth":3,"payload":{"lines":[143,144]},"content":"zk"},{"type":"list_item","depth":3,"payload":{"lines":[144,145]},"content":"etcd"},{"type":"list_item","depth":3,"payload":{"lines":[145,146]},"content":"nacos"},{"type":"list_item","depth":3,"payload":{"lines":[146,147]},"content":"consul"}]},{"type":"heading","depth":2,"payload":{"lines":[148,149]},"content":"13 Application Packaging"},{"type":"heading","depth":2,"payload":{"lines":[150,151]},"content":"14 Deployment &amp; Scheduling"},{"type":"heading","depth":2,"payload":{"lines":[152,153]},"content":"15 进程隔离 (Process Isolation)"},{"type":"heading","depth":2,"payload":{"lines":[154,155]},"content":"16 环境管理 (Environment Management)"},{"type":"heading","depth":2,"payload":{"lines":[156,157]},"content":"17 Resource Management"},{"type":"heading","depth":2,"payload":{"lines":[158,159]},"content":"18 Operating System"},{"type":"heading","depth":2,"payload":{"lines":[160,161]},"content":"19 Virtualization"},{"type":"heading","depth":2,"payload":{"lines":[162,163]},"content":"20 Hardware, Storage, Networking"}]}]},{})</script>
</body>
</html>
