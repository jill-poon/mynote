# 微服务架构

[TOC]

## SOA架构 VS 微服务架构

* **SOA架构**
  * 面向企业
  * 关注冗余问题
  * 信息孤岛
* **微服务架构**
  * 面向应用
  * 服务粒度
  
## 通信协议

### RPC

* 强调像调用本地方法一样调用远程服务
* 强调网络通信
* 强调序列化/反序列化

### HTTP

* 超文本协议
* OSI七层模型的应用层协议
* 数据传输协议

## 应用网关

* 网关
  * 流量网关
  * 业务网关
* 统一服务入口
* 流量治理

## 服务治理

### 微服务架构目的

* 高可用
* 高并发
* 高性能
* 高可扩展

### 注册中心

* 实例数 = (垂直-服务) N × (水平-集群) M
* 需要服务治理保证

#### 注册中心核心功能

1. 服务注册
2. 服务续约
3. 服务获取
4. 服务调用
5. 服务同步
6. 服务剔除
7. 自我保护
8. 服务下线
9. 动态感知

#### 注册中心架构特性

* CAP定理
  * **CP** 强一致性 数据存储场景
  * **AP** 高可用 交互式场景

## 配置中心

* zk
* etcd
* nacos
* consul

## 应用监控

* 链路追踪
  * Skywalking
    * 监控粒度细
  * CAT
  * zipkin
  * pingpoint

## 系统监控

* ELK (完善)
* Prometheus + grafana
