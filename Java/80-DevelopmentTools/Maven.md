# Maven

## 主要作用 (3)

1. **项目构建** ：提供标准的、跨平台的自动化项目构建方式。
2. **依赖管理** ：方便快捷的管理项目依赖的资源（jar 包），避免资源间的版本冲突问题。
3. **统一开发结构** ：提供标准的、统一的项目结构。

## Maven 坐标 (3+5)

* 必须 (3)
  * groupId 公司组织
  * artifactId 项目名，唯一标识
  * version 版本号
* 可选 (5)
  * type
  * scope
  * option
  * packing
  * classifier

## Classpath (3)

classpath 用于指定 `.class` 文件存放的位置，**类加载器**会从该路径中加载所需的 `.class` 文件到内存中。

Maven 在编译、执行测试、实际运行有着三套不同的 classpath：

1. **编译 classpath** ：编译主代码有效
2. **测试 classpath** ：编译、运行测试代码有效
3. **运行 classpath** ：项目运行时有效

## 依赖范围 (5)

1. **compile**：编译依赖范围（默认），使用此依赖范围**对于编译、测试、运行三种都有效**，即在编译、测试和运行的时候都要使用该依赖 Jar 包。
2. **test**：测试依赖范围，从字面意思就可以知道此依赖范围**只能用于测试**，而在编译和运行项目时无法使用此类依赖，典型的是 JUnit，它只用于编译测试代码和运行测试代码的时候才需要。
3. **provided** ：此依赖范围，对于**编译和测试**有效，而对运行时无效。比如 `servlet-api.jar` 在 Tomcat 中已经提供了，我们只需要的是编译期提供而已。
4. **runtime**：运行时依赖范围，**对于测试和运行有效**，但是在编译主代码时无效，典型的就是 JDBC 驱动实现。
5. **system**：系统依赖范围，使用 system 范围的依赖时必须通过 systemPath 元素显示地指定依赖文件的路径，不依赖 Maven 仓库解析，所以可能会造成建构的不可移植。

| 范围     | 编译cp有效 | 测试cp有效 | 运行cp有效 | 参与打包 |
| -------- | :--------: | :--------: | :--------: | :------: |
| compile  |     ○      |     ○      |     ○      |    ○     |
| test     |     ×      |     ○      |     ×      |    ×     |
| provided |     ○      |     ○      |     ×      |    ×     |
| runtime  |     ×      |     ○      |     ○      |    ○     |
| system   |     ×      |     ×      |     ×      |    ×     |

## 依赖冲突

1. 对于 Maven 而言，同一个 groupId 同一个 artifactId 下，只能使用一个 version，同一个 pom 文件，只会引入后一个声明的依赖。
2. 依赖调解
    1. 路径最短优先
    2. 声明顺序优先

## 排除依赖

可以通过 `exclusive` 标签手动将依赖给排除
