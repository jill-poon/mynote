# DDD

## 业务对象 ? （3）

* **业务角色** 表示一个 **角色** 以及其所 **承担的一系列责任** (收银员 - 职责：收钱、找零、退换货)
* **业务实体** 与业务角色 **交互** 所需要的 **可交付的工件、资源、事件** (电商项目：商品)
* **业务用例** 业务角色与业务实体之间 **如何执行工作流程** (业务链路、测试用例)

## 业务对象模型 (4)

* 失血模型
	* 特点
	  1. 对象中只包含 `get` 、 `set` 方法 (POJO)
	  2. 业务逻辑层 (service) 包含了 **业务逻辑** 以及 **持久层** 的交互
	* 优点
	  * 领域对象 **结构简单**
	* 缺点
	  * 肿胀的业务代码逻辑，**难以维护**
	  * 无法应对 **频繁更改的需求**
*  贫血模型 (Anemic Domain Model)
	* 特点
	  1. 对象中包含：**属性、固有行为**
	  2. 业务逻辑层 (service)：**非固有行为**
	  3. 持久层 (DAO)
	* 优点
	  * 层次结构清楚，各层级是单向依赖
	  * 开发非常迅速，易于理解
	* 缺点
	  * 无法良好的应对非常复杂的逻辑以及场景
* 充血模型 (Rich Domain Model)
	* 特点
	  1. 对象中包含：**固有行为、非固有行为**
	  2. 业务逻辑层 (service)：**整合、事务封装**
	* 优点
	  * 更符合 **面向对象** 原则
	  * 业务逻辑层很薄，**符合单一职责原则**
	* 缺点
	  * **职责** 不好划分，要求开发者水平要很高、**落地困难**
	  * 模型包含大量操作，**增加不必要的消耗**
* 胀血模型
	* 特点
	  1. 对象中包含：**固有行为、非固有行为、事务、授权**
	  2. 持久层 (DAO)
	* 优点
	  * **简化了分层架构**
	  * **符合面向对象设计原则**
	* 缺点
	  * 取消了业务逻辑层，直接在领域对象上封装事务以及授权，授权很多原本不属于这个领域对象的逻辑，模型不稳定
	  * **代码稳定性、维护的稳定性**

## 四层架构设计

>松散分层架构

1. 用户界面层 (User Interface)
2. 应用层 (Application)
3. 领域层 (Domain)
4. 基础实施层 (Infrastructure)

## 五层架构设计

>DCI、松散分层架构

1. 用户界面层 (User Interface)
2. 应用层 (Application)
3. 环境层 (Context)
   * 领域与行为绑定，聚合
4. 领域层 (Domain)
5. 基础实施层 (Infrastructure)

## 六边形架构

> 严格分层架构、依赖倒置原则

1. 外围是适配器
2. 中间是应用程序、领域模型

## 战略设计概念 (4)

1. 领域
2. 子域
	1. 核心子域
	2. 通用子域
	3. 支持子域
3. 通用语言
4. 限界上下文

## 建模方法 (4)

* UML (不推荐)
* 四色建模法
* 事件风暴
* 限界纸笔法

## 战术设计核心概念 (8)

* 实体
	* 唯一标识
	* 有状态
	* 声明周期
* 值对象
	* 只提供值
* 聚合
	* 定义边界
* 聚合根
	*  协调聚合内的实体和值对象
* 领域服务
	* 不适合归到实体和值对象领域操作
* 领域事件
	* 将领域中所发生的活动建模成一系列的离散事件
* 工厂与资源库
	* 创建和存储


## 建模与设计的流程 ？(4)

1. 挖掘用户故事，确定核心愿景
	1. 问题空间的描绘
	2. 文字表达
	3. 讨论 + 图形表达
2. 建立通用语言
3. 战略设计
4. 战术设计

