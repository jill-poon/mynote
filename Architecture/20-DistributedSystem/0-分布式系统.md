# 分布式系统

## 分布式系统特点

> 核心概念: 让**多台服务器协同工作**，完成单台服务器**无法处理的任务**

### 1 透明性

- 在用户面前的表现就想一个**传统的单处理机分时系统**，用户不必了解其内部就够就能使用

### 2 扩展性

- 能**根据需求的增加而扩展**，可通过**横向扩展**集群使集群的**整体性能得到线性提升**

### 3 可靠性

- **不允许单点失效问题存在**，具有持续服务的特性

### 4 高性能

- **高性能才是设计分布式系统的初衷**
- 缺点
    1. 在节点**通信部分开销比较大**， 并发安全问题也变得复杂， 需要在保证数据完整性的同时兼顾性能
    2. **过分依赖网络**， 网络信息的丢失和饱和将会抵消分布式系统的大部分优势
    3. 有潜在的**数据安全**和**网络安全**等安全性问题

## 什么是 CAP 原则

- **一致性 `Consistency`**。 分布式系统中**所有数据备份**在**同一时刻**是否**同样的值**。
- **可用性 `Availability`**。 在集群中**一部分节点故障**后，**整体**是否还能**响应**客户端读写**请求**。
- **分区容忍性 `Partition`**。 对通信的**时限要求**。分布式系统在遇到**任何网络分区故障**的时候，仍然能够**保证对外提供服务**。

## 什么是BASE原则

- **一般可用 `Basically Availability`**。分布式系统出现**不可预知故障时**，**允许损失部分可用性**。
  - 保证核心服务可用：降低响应时间，甚至服务降级。
- **软状态 `Soft state`**。允许系统中数据存在**中间状态**，并认为该中间状态**不影响系统整体可用性**。*允许系统不同节点的数据副本之间同步时存在延迟*
- **最终一致性 `Eventually consistent`**。强调**所有数据副本**，经过一段时间同步后，**最终**能达到一个**一致**的状态。

## 客观存在的问题

1. 时钟偏移
2. FullGC
3. 网络分区