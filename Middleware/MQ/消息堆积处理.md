# 消息堆积处理

## RocketMQ

增加消费者实例，不过超过 Topic 的 MessageQueue 数则没有效果

## Kafka

增加消费者实例，不过超过 Topic 的 Partition 数则没有效果

## 服务降级

把非核心业务做服务降级，降低消息生产速度，确保核心业务正常运行

## 下游故障导致消费失败

- 下游故障，导致 consumer 消费失败，大量消息堆积在 MQ
- 修复 consumer
- 新建临时 Topic，增加分区数量
- 新增临时 consumer，把消息转发到新的 Topic
- 增加 consumer 消费新的 Topic
- 恢复原有 consumer