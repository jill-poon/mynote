# AST

## 文本 -> 抽象语法树的过程

### 1 词法分析

#### 文本 -> token 列表

**第一步：词法分析，也叫扫描scanner** 它读取我们的代码，然后把它们按照预定的规则合并成一个个的标识 tokens。同时，它会移除空白符、注释等。最后，整个代码将被分割进一个 tokens 列表（或者说一维数组）。

> 去除空格，对 token 分类，去除空格，然后对 token 分类，那些属于语法关键字，那些属于操作符，那些属于语句的截止位置，那些属于数据

### 2 语法分析

#### token 列表 -> 语法二叉树

**第二步：语法分析，也称解析器** 它会将词法分析出来的数组转换成树形的形式，同时，验证语法。语法如果有错的话，抛出语法错误。

扫描 token 流，然后分析它的语法，这一步应该是分析一条以；结尾的语句具体的执行规则，然后使用逆波兰表达式组合，最后形成一个二叉树，二叉树从底部往上一步步合并
当词法分析源代码的时候，它会一个一个字母地读取代码，所以很形象地称之为扫描 - scans。当它遇到空格、操作符，或者特殊符号的时候，它会认为一个话已经完成了。

## CST

当生成树的时候，解析器会删除一些没必要的标识 tokens（比如：不完整的括号），因此 AST 不是 100% 与源码匹配的。解析器100%覆盖所有代码结构生成树叫做 CST（具体语法树）。

## 模拟过程

- 遍历每一个字符串
- 如果这个字符是`数字`，那么就将`数字压入 stack1栈`，把`空字符串压入stack2栈`，
- 如果这个字符是`字母`，那么此时就把`stack2栈顶 这一项改为这个字母`，
- 如果这个字符是`]`，那么就将`数字从 stack1 栈中弹出`，把 `stack2的栈顶元素重复 stack1中 弹栈的数字的次数`，然后将其`从stack2中弹出，拼接到stack2的新栈顶上`。
