# 线程数公式

## 公式一

$N_{cpu}=CPU核数$，$U_{cpu}=CPU利用率$，$W=等待时间$，$C=计算时间$

$$
N_{threads} = N_{cpu}*U_{cpu}*(1+\frac{W}{C})
$$

## 公式二

$$
N_{threads} = \frac{N_{cpu}}{(1 - 阻塞系数)}
$$


| 类型      | 阻塞系数 |
| --------- | -------- |
| CPU Bound | 0        |
| I/O Bound  | 1        |


**阻塞系数：**

$$
    阻塞系数 = \frac{W}{W+C}
$$

## 线程数

- CPU 密集型线程数 = N * 1(U) * (1 + 0 (阻塞系数))) = N+1 (+1 备用线程)
- I/O 密集型线程数 = N * 1(U) * (1 + 1 (阻塞系数))) = 2N