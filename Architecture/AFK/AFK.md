# 可扩展架构的方法论——AKF 扩展立方体

> **AKF 扩展立方体（Scalability Cube）**，是可扩展模型，这个立方体有三个轴线，每个轴线描述扩展性的一个维度，他们分别是产品、流程和团队：
    X 轴 —— 代表无差别的克隆服务和数据，工作可以很均匀的分散在不同的服务实例上  
    Y 轴 —— 关注应用中职责的划分，比如数据类型，交易执行类型的划分
    Z 轴 —— 关注服务和数据的优先级划分，如分地域划分

## 扩展维度

### X 轴扩展

- 优点
  - 成本低，实施简单
- 缺点
  - 当单个产品或应用过大时，服务响应变慢，无法通过 X 轴的水平扩展提高速度
- 场景
  - 发展初期，业务复杂度低，需要增加系统容量
- 手段
  - 应用水平扩展，负载均衡
  - 数据库主从复制，读写分离

### Y 轴扩展

- 优点
  - 解决代码复杂度问题
  - 可以实现故障隔离
  - 可以提高响应时间
  - 可以使团队聚焦
- 缺点
  - 成本相对较高
- 场景
  - 业务复杂
  - 数据量大
  - 代码耦合度高
  - 团队规模大
- 手段
  - 面向服务分割
  - 垂直分库

### Z 轴扩展

- 优点
  - 解决数据集约束
  - 降低故障风险
  - **渐进交付**
  - 最大的扩展性
- 缺点
  - 成本最昂贵
- 场景
  - 用户指数级快速增长
- 手段
  - **面向查找分割**，基于用户、请求或者数据分割，例如可以将不同产品的SKU分到不同的搜索服务，可以将用户哈希到不同的服务等
  - 按照一定算法，进行分片，例如将搜索按照 MapReduce 的原理进行**分片**，把 SKU 的数据按照不同的哈希值进行分片存储，每个分片再进行 X 轴冗余
